{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.239.0"},"children":{"EpicWeaveStack-dev":{"id":"EpicWeaveStack-dev","path":"EpicWeaveStack-dev","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.239.0"},"children":{"EpicWeaveTable":{"id":"EpicWeaveTable","path":"EpicWeaveStack-dev/EpicWeaveTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/EpicWeaveTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"PK","attributeType":"S"},{"attributeName":"SK","attributeType":"S"},{"attributeName":"GSI1PK","attributeType":"S"},{"attributeName":"GSI1SK","attributeType":"S"},{"attributeName":"GSI2PK","attributeType":"S"},{"attributeName":"GSI2SK","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"GSI1","keySchema":[{"attributeName":"GSI1PK","keyType":"HASH"},{"attributeName":"GSI1SK","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}},{"indexName":"GSI2","keySchema":[{"attributeName":"GSI2PK","keyType":"HASH"},{"attributeName":"GSI2SK","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"PK","keyType":"HASH"},{"attributeName":"SK","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"tableName":"EpicWeaveTable-dev","timeToLiveSpecification":{"attributeName":"expiresAt","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"EpicWeaveStack-dev/EpicWeaveTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.239.0"}}}},"DesignsBucket":{"id":"DesignsBucket","path":"EpicWeaveStack-dev/DesignsBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/DesignsBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"bucketName":"epicweave-designs-364453382854-us-east-1","lifecycleConfiguration":{"rules":[{"expirationInDays":90,"id":"DeleteOldDesigns","status":"Enabled"}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"versioningConfiguration":{"status":"Enabled"}}}},"Policy":{"id":"Policy","path":"EpicWeaveStack-dev/DesignsBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/DesignsBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"DesignsBucket6E20C4BA"},"policyDocument":{"Statement":[{"Action":"s3:GetObject","Effect":"Allow","Principal":{"CanonicalUser":{"Fn::GetAtt":["AssetsDistributionOrigin2S3Origin24F3033E","S3CanonicalUserId"]}},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["DesignsBucket6E20C4BA","Arn"]},"/*"]]}}],"Version":"2012-10-17"}}}}}}}},"ProductsBucket":{"id":"ProductsBucket","path":"EpicWeaveStack-dev/ProductsBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ProductsBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"bucketName":"epicweave-products-364453382854-us-east-1","publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true}}}},"Policy":{"id":"Policy","path":"EpicWeaveStack-dev/ProductsBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ProductsBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"ProductsBucket62395B91"},"policyDocument":{"Statement":[{"Action":"s3:GetObject","Effect":"Allow","Principal":{"CanonicalUser":{"Fn::GetAtt":["AssetsDistributionOrigin1S3Origin8A1E1785","S3CanonicalUserId"]}},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["ProductsBucket62395B91","Arn"]},"/*"]]}}],"Version":"2012-10-17"}}}}}}}},"AssetsDistribution":{"id":"AssetsDistribution","path":"EpicWeaveStack-dev/AssetsDistribution","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.239.0"},"children":{"Origin1":{"id":"Origin1","path":"EpicWeaveStack-dev/AssetsDistribution/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.5.1"},"children":{"S3Origin":{"id":"S3Origin","path":"EpicWeaveStack-dev/AssetsDistribution/Origin1/S3Origin","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.OriginAccessIdentity","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/AssetsDistribution/Origin1/S3Origin/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCloudFrontOriginAccessIdentity","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CloudFrontOriginAccessIdentity","aws:cdk:cloudformation:props":{"cloudFrontOriginAccessIdentityConfig":{"comment":"Identity for EpicWeaveStackdevAssetsDistributionOrigin1FEB1330A"}}}}}}}},"Origin2":{"id":"Origin2","path":"EpicWeaveStack-dev/AssetsDistribution/Origin2","constructInfo":{"fqn":"constructs.Construct","version":"10.5.1"},"children":{"S3Origin":{"id":"S3Origin","path":"EpicWeaveStack-dev/AssetsDistribution/Origin2/S3Origin","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.OriginAccessIdentity","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/AssetsDistribution/Origin2/S3Origin/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCloudFrontOriginAccessIdentity","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CloudFrontOriginAccessIdentity","aws:cdk:cloudformation:props":{"cloudFrontOriginAccessIdentityConfig":{"comment":"Identity for EpicWeaveStackdevAssetsDistributionOrigin2DC74AD75"}}}}}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/AssetsDistribution/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["ProductsBucket62395B91","RegionalDomainName"]},"id":"EpicWeaveStackdevAssetsDistributionOrigin1FEB1330A","s3OriginConfig":{"originAccessIdentity":{"Fn::Join":["",["origin-access-identity/cloudfront/",{"Ref":"AssetsDistributionOrigin1S3Origin8A1E1785"}]]}}},{"domainName":{"Fn::GetAtt":["DesignsBucket6E20C4BA","RegionalDomainName"]},"id":"EpicWeaveStackdevAssetsDistributionOrigin2DC74AD75","s3OriginConfig":{"originAccessIdentity":{"Fn::Join":["",["origin-access-identity/cloudfront/",{"Ref":"AssetsDistributionOrigin2S3Origin24F3033E"}]]}}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"EpicWeaveStackdevAssetsDistributionOrigin1FEB1330A","cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"viewerProtocolPolicy":"redirect-to-https"},"cacheBehaviors":[{"pathPattern":"/designs/*","targetOriginId":"EpicWeaveStackdevAssetsDistributionOrigin2DC74AD75","cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"viewerProtocolPolicy":"redirect-to-https"}],"httpVersion":"http2","ipv6Enabled":true,"priceClass":"PriceClass_100"}}}}}},"UserPool":{"id":"UserPool","path":"EpicWeaveStack-dev/UserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/UserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_email","priority":1}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":false},"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","policies":{"passwordPolicy":{"minimumLength":8,"requireLowercase":true,"requireUppercase":true,"requireNumbers":true,"requireSymbols":true}},"smsVerificationMessage":"The verification code to your new account is {####}","usernameAttributes":["email"],"userPoolAddOns":{"advancedSecurityMode":"ENFORCED"},"userPoolName":"epicweave-users-dev","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}},"WebClient":{"id":"WebClient","path":"EpicWeaveStack-dev/UserPool/WebClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/UserPool/WebClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"allowedOAuthFlows":["code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["email","openid","profile"],"callbackUrLs":["http://localhost:3000/auth/callback"],"clientName":"epicweave-web-client","explicitAuthFlows":["ALLOW_USER_PASSWORD_AUTH","ALLOW_USER_SRP_AUTH","ALLOW_REFRESH_TOKEN_AUTH"],"logoutUrLs":["http://localhost:3000"],"supportedIdentityProviders":["COGNITO"],"userPoolId":{"Ref":"UserPool6BA7E5F2"}}}}}},"CognitoDomain":{"id":"CognitoDomain","path":"EpicWeaveStack-dev/UserPool/CognitoDomain","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolDomain","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/UserPool/CognitoDomain/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolDomain","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolDomain","aws:cdk:cloudformation:props":{"domain":"epicweave-364453382854","userPoolId":{"Ref":"UserPool6BA7E5F2"}}}}}}}},"AIJobDLQ":{"id":"AIJobDLQ","path":"EpicWeaveStack-dev/AIJobDLQ","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/AIJobDLQ/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"messageRetentionPeriod":1209600,"queueName":"epicweave-ai-jobs-dlq-dev"}}}}},"AIJobQueue":{"id":"AIJobQueue","path":"EpicWeaveStack-dev/AIJobQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/AIJobQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"queueName":"epicweave-ai-jobs-dev","redrivePolicy":{"deadLetterTargetArn":{"Fn::GetAtt":["AIJobDLQ6BDBB71C","Arn"]},"maxReceiveCount":3},"visibilityTimeout":300}}}}},"SessionFee":{"id":"SessionFee","path":"EpicWeaveStack-dev/SessionFee","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/SessionFee/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"description":"AI design session fee in USD","name":"/EpicWeave/pricing/session-fee","tier":"Standard","type":"String","value":"2.00"}}}}},"CustomTshirtBase":{"id":"CustomTshirtBase","path":"EpicWeaveStack-dev/CustomTshirtBase","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/CustomTshirtBase/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"description":"Base price for custom t-shirt in USD","name":"/EpicWeave/pricing/custom-tshirt-base","tier":"Standard","type":"String","value":"20.00"}}}}},"BothPlacementSurcharge":{"id":"BothPlacementSurcharge","path":"EpicWeaveStack-dev/BothPlacementSurcharge","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/BothPlacementSurcharge/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"description":"Surcharge for front+back printing in USD","name":"/EpicWeave/pricing/both-placement-surcharge","tier":"Standard","type":"String","value":"8.00"}}}}},"MaxIterations":{"id":"MaxIterations","path":"EpicWeaveStack-dev/MaxIterations","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/MaxIterations/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"description":"Maximum design iterations per session","name":"/EpicWeave/session/max-iterations","tier":"Standard","type":"String","value":"5"}}}}},"SessionTTL":{"id":"SessionTTL","path":"EpicWeaveStack-dev/SessionTTL","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/SessionTTL/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"description":"Session expiry in minutes","name":"/EpicWeave/session/ttl-minutes","tier":"Standard","type":"String","value":"60"}}}}},"ImageResolution":{"id":"ImageResolution","path":"EpicWeaveStack-dev/ImageResolution","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ImageResolution/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"description":"DALL-E output resolution","name":"/EpicWeave/ai/image-resolution","tier":"Standard","type":"String","value":"1024x1024"}}}}},"ShippingFlatRate":{"id":"ShippingFlatRate","path":"EpicWeaveStack-dev/ShippingFlatRate","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ShippingFlatRate/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"description":"Base flat shipping rate in USD","name":"/EpicWeave/shipping/flat-rate-base","tier":"Standard","type":"String","value":"5.99"}}}}},"AllowedMythologies":{"id":"AllowedMythologies","path":"EpicWeaveStack-dev/AllowedMythologies","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/AllowedMythologies/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"description":"Comma-separated allowed mythology types","name":"/EpicWeave/mythology/allowed-types","tier":"Standard","type":"String","value":"hindu,greek"}}}}},"StripeSecret":{"id":"StripeSecret","path":"EpicWeaveStack-dev/StripeSecret","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.Secret","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/StripeSecret/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecret","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"description":"Stripe secret key for payment processing","generateSecretString":{},"name":"epicweave/stripe-api-key"}}}}},"OpenAISecret":{"id":"OpenAISecret","path":"EpicWeaveStack-dev/OpenAISecret","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.Secret","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/OpenAISecret/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecret","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"description":"OpenAI API key for DALL-E image generation","generateSecretString":{},"name":"epicweave/openai-api-key"}}}}},"TableName":{"id":"TableName","path":"EpicWeaveStack-dev/TableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.239.0"}},"UserPoolId":{"id":"UserPoolId","path":"EpicWeaveStack-dev/UserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.239.0"}},"UserPoolClientId":{"id":"UserPoolClientId","path":"EpicWeaveStack-dev/UserPoolClientId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.239.0"}},"DesignsBucketName":{"id":"DesignsBucketName","path":"EpicWeaveStack-dev/DesignsBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.239.0"}},"ProductsBucketName":{"id":"ProductsBucketName","path":"EpicWeaveStack-dev/ProductsBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.239.0"}},"CloudFrontDomain":{"id":"CloudFrontDomain","path":"EpicWeaveStack-dev/CloudFrontDomain","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.239.0"}},"AIJobQueueUrl":{"id":"AIJobQueueUrl","path":"EpicWeaveStack-dev/AIJobQueueUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.239.0"}},"ApiGateway":{"id":"ApiGateway","path":"EpicWeaveStack-dev/ApiGateway","constructInfo":{"fqn":"constructs.Construct","version":"10.5.1"},"children":{"EpicWeaveApi":{"id":"EpicWeaveApi","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpApi","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnApi","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Api","aws:cdk:cloudformation:props":{"corsConfiguration":{"allowCredentials":true,"allowHeaders":["*"],"allowMethods":["GET","POST","PUT","PATCH","DELETE","OPTIONS"],"allowOrigins":["http://localhost:3000"],"maxAge":86400},"description":"EpicWeave E-Commerce API","name":"epicweave-api-dev","protocolType":"HTTP"}}},"DefaultStage":{"id":"DefaultStage","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/DefaultStage","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpStage","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/DefaultStage/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnStage","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Stage","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"autoDeploy":true,"stageName":"$default"}}}}},"GET--products":{"id":"GET--products","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--products","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.239.0"},"children":{"-products-GET-Integration":{"id":"-products-GET-Integration","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--products/-products-GET-Integration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--products/-products-GET-Integration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["LambdaFunctionsListProductsFunctionDDFEFE76","Arn"]},"payloadFormatVersion":"2.0"}}}}},"-products-GET-Integration-Permission":{"id":"-products-GET-Integration-Permission","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--products/-products-GET-Integration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdaFunctionsListProductsFunctionDDFEFE76","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:364453382854:",{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"/*/*/products"]]}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--products/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"authorizationType":"NONE","routeKey":"GET /products","target":{"Fn::Join":["",["integrations/",{"Ref":"ApiGatewayEpicWeaveApiGETproductsproductsGETIntegration61EF218B"}]]}}}}}},"GET--products--{productId}":{"id":"GET--products--{productId}","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--products--{productId}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.239.0"},"children":{"-products-{productId}-GET-Integration":{"id":"-products-{productId}-GET-Integration","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--products--{productId}/-products-{productId}-GET-Integration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--products--{productId}/-products-{productId}-GET-Integration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["LambdaFunctionsGetProductFunction6CCFB82D","Arn"]},"payloadFormatVersion":"2.0"}}}}},"-products-{productId}-GET-Integration-Permission":{"id":"-products-{productId}-GET-Integration-Permission","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--products--{productId}/-products-{productId}-GET-Integration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdaFunctionsGetProductFunction6CCFB82D","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:364453382854:",{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"/*/*/products/{productId}"]]}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--products--{productId}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"authorizationType":"NONE","routeKey":"GET /products/{productId}","target":{"Fn::Join":["",["integrations/",{"Ref":"ApiGatewayEpicWeaveApiGETproductsproductIdproductsproductIdGETIntegrationF6E5005B"}]]}}}}}},"POST--admin--products":{"id":"POST--admin--products","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--admin--products","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.239.0"},"children":{"-admin-products-POST-Integration":{"id":"-admin-products-POST-Integration","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--admin--products/-admin-products-POST-Integration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--admin--products/-admin-products-POST-Integration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["LambdaFunctionsCreateProductFunction8976831D","Arn"]},"payloadFormatVersion":"2.0"}}}}},"-admin-products-POST-Integration-Permission":{"id":"-admin-products-POST-Integration-Permission","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--admin--products/-admin-products-POST-Integration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdaFunctionsCreateProductFunction8976831D","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:364453382854:",{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"/*/*/admin/products"]]}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--admin--products/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"authorizationType":"JWT","authorizerId":{"Ref":"ApiGatewayEpicWeaveApiCognitoAuthorizer3D369202"},"routeKey":"POST /admin/products","target":{"Fn::Join":["",["integrations/",{"Ref":"ApiGatewayEpicWeaveApiPOSTadminproductsadminproductsPOSTIntegration24D739BA"}]]}}}}}},"CognitoAuthorizer":{"id":"CognitoAuthorizer","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/CognitoAuthorizer","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpAuthorizer","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/CognitoAuthorizer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnAuthorizer","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Authorizer","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"authorizerType":"JWT","identitySource":["$request.header.Authorization"],"jwtConfiguration":{"audience":[{"Ref":"UserPoolWebClient4C9370B0"}],"issuer":{"Fn::Join":["",["https://cognito-idp.us-east-1.amazonaws.com/",{"Ref":"UserPool6BA7E5F2"}]]}},"name":"CognitoAuthorizer"}}}}},"POST--sessions--create":{"id":"POST--sessions--create","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--sessions--create","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.239.0"},"children":{"-sessions-create-POST-Integration":{"id":"-sessions-create-POST-Integration","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--sessions--create/-sessions-create-POST-Integration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--sessions--create/-sessions-create-POST-Integration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["LambdaFunctionsCreateSessionFunction9708B1F5","Arn"]},"payloadFormatVersion":"2.0"}}}}},"-sessions-create-POST-Integration-Permission":{"id":"-sessions-create-POST-Integration-Permission","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--sessions--create/-sessions-create-POST-Integration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdaFunctionsCreateSessionFunction9708B1F5","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:364453382854:",{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"/*/*/sessions/create"]]}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--sessions--create/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"authorizationType":"JWT","authorizerId":{"Ref":"ApiGatewayEpicWeaveApiCognitoAuthorizer3D369202"},"routeKey":"POST /sessions/create","target":{"Fn::Join":["",["integrations/",{"Ref":"ApiGatewayEpicWeaveApiPOSTsessionscreatesessionscreatePOSTIntegrationB3EEC73B"}]]}}}}}},"POST--sessions--{sessionId}--generate":{"id":"POST--sessions--{sessionId}--generate","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--sessions--{sessionId}--generate","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.239.0"},"children":{"-sessions-{sessionId}-generate-POST-Integration":{"id":"-sessions-{sessionId}-generate-POST-Integration","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--sessions--{sessionId}--generate/-sessions-{sessionId}-generate-POST-Integration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--sessions--{sessionId}--generate/-sessions-{sessionId}-generate-POST-Integration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["LambdaFunctionsGenerateDesignFunction4341EBC1","Arn"]},"payloadFormatVersion":"2.0"}}}}},"-sessions-{sessionId}-generate-POST-Integration-Permission":{"id":"-sessions-{sessionId}-generate-POST-Integration-Permission","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--sessions--{sessionId}--generate/-sessions-{sessionId}-generate-POST-Integration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdaFunctionsGenerateDesignFunction4341EBC1","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:364453382854:",{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"/*/*/sessions/{sessionId}/generate"]]}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--sessions--{sessionId}--generate/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"authorizationType":"JWT","authorizerId":{"Ref":"ApiGatewayEpicWeaveApiCognitoAuthorizer3D369202"},"routeKey":"POST /sessions/{sessionId}/generate","target":{"Fn::Join":["",["integrations/",{"Ref":"ApiGatewayEpicWeaveApiPOSTsessionssessionIdgeneratesessionssessionIdgeneratePOSTIntegration05D36238"}]]}}}}}},"GET--sessions--{sessionId}--status":{"id":"GET--sessions--{sessionId}--status","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--sessions--{sessionId}--status","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.239.0"},"children":{"-sessions-{sessionId}-status-GET-Integration":{"id":"-sessions-{sessionId}-status-GET-Integration","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--sessions--{sessionId}--status/-sessions-{sessionId}-status-GET-Integration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--sessions--{sessionId}--status/-sessions-{sessionId}-status-GET-Integration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["LambdaFunctionsGetSessionStatusFunction581E37DC","Arn"]},"payloadFormatVersion":"2.0"}}}}},"-sessions-{sessionId}-status-GET-Integration-Permission":{"id":"-sessions-{sessionId}-status-GET-Integration-Permission","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--sessions--{sessionId}--status/-sessions-{sessionId}-status-GET-Integration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdaFunctionsGetSessionStatusFunction581E37DC","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:364453382854:",{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"/*/*/sessions/{sessionId}/status"]]}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--sessions--{sessionId}--status/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"authorizationType":"JWT","authorizerId":{"Ref":"ApiGatewayEpicWeaveApiCognitoAuthorizer3D369202"},"routeKey":"GET /sessions/{sessionId}/status","target":{"Fn::Join":["",["integrations/",{"Ref":"ApiGatewayEpicWeaveApiGETsessionssessionIdstatussessionssessionIdstatusGETIntegrationC42E3C3B"}]]}}}}}},"POST--sessions--{sessionId}--finalize":{"id":"POST--sessions--{sessionId}--finalize","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--sessions--{sessionId}--finalize","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.239.0"},"children":{"-sessions-{sessionId}-finalize-POST-Integration":{"id":"-sessions-{sessionId}-finalize-POST-Integration","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--sessions--{sessionId}--finalize/-sessions-{sessionId}-finalize-POST-Integration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--sessions--{sessionId}--finalize/-sessions-{sessionId}-finalize-POST-Integration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["LambdaFunctionsFinalizeDesignFunction964244F7","Arn"]},"payloadFormatVersion":"2.0"}}}}},"-sessions-{sessionId}-finalize-POST-Integration-Permission":{"id":"-sessions-{sessionId}-finalize-POST-Integration-Permission","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--sessions--{sessionId}--finalize/-sessions-{sessionId}-finalize-POST-Integration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdaFunctionsFinalizeDesignFunction964244F7","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:364453382854:",{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"/*/*/sessions/{sessionId}/finalize"]]}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--sessions--{sessionId}--finalize/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"authorizationType":"JWT","authorizerId":{"Ref":"ApiGatewayEpicWeaveApiCognitoAuthorizer3D369202"},"routeKey":"POST /sessions/{sessionId}/finalize","target":{"Fn::Join":["",["integrations/",{"Ref":"ApiGatewayEpicWeaveApiPOSTsessionssessionIdfinalizesessionssessionIdfinalizePOSTIntegrationB363EEBB"}]]}}}}}},"GET--cart":{"id":"GET--cart","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--cart","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.239.0"},"children":{"-cart-GET-Integration":{"id":"-cart-GET-Integration","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--cart/-cart-GET-Integration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--cart/-cart-GET-Integration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["LambdaFunctionsGetCartFunctionD1B62B0F","Arn"]},"payloadFormatVersion":"2.0"}}}}},"-cart-GET-Integration-Permission":{"id":"-cart-GET-Integration-Permission","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--cart/-cart-GET-Integration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdaFunctionsGetCartFunctionD1B62B0F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:364453382854:",{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"/*/*/cart"]]}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--cart/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"authorizationType":"JWT","authorizerId":{"Ref":"ApiGatewayEpicWeaveApiCognitoAuthorizer3D369202"},"routeKey":"GET /cart","target":{"Fn::Join":["",["integrations/",{"Ref":"ApiGatewayEpicWeaveApiGETcartcartGETIntegrationE63D2153"}]]}}}}}},"POST--cart--items":{"id":"POST--cart--items","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--cart--items","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.239.0"},"children":{"-cart-items-POST-Integration":{"id":"-cart-items-POST-Integration","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--cart--items/-cart-items-POST-Integration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--cart--items/-cart-items-POST-Integration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["LambdaFunctionsAddToCartFunction0E3ADF3C","Arn"]},"payloadFormatVersion":"2.0"}}}}},"-cart-items-POST-Integration-Permission":{"id":"-cart-items-POST-Integration-Permission","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--cart--items/-cart-items-POST-Integration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdaFunctionsAddToCartFunction0E3ADF3C","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:364453382854:",{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"/*/*/cart/items"]]}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--cart--items/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"authorizationType":"JWT","authorizerId":{"Ref":"ApiGatewayEpicWeaveApiCognitoAuthorizer3D369202"},"routeKey":"POST /cart/items","target":{"Fn::Join":["",["integrations/",{"Ref":"ApiGatewayEpicWeaveApiPOSTcartitemscartitemsPOSTIntegration3D805DFB"}]]}}}}}},"PATCH--cart--items--{itemId}":{"id":"PATCH--cart--items--{itemId}","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/PATCH--cart--items--{itemId}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.239.0"},"children":{"-cart-items-{itemId}-PATCH-Integration":{"id":"-cart-items-{itemId}-PATCH-Integration","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/PATCH--cart--items--{itemId}/-cart-items-{itemId}-PATCH-Integration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/PATCH--cart--items--{itemId}/-cart-items-{itemId}-PATCH-Integration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["LambdaFunctionsUpdateCartItemFunctionC53D526C","Arn"]},"payloadFormatVersion":"2.0"}}}}},"-cart-items-{itemId}-PATCH-Integration-Permission":{"id":"-cart-items-{itemId}-PATCH-Integration-Permission","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/PATCH--cart--items--{itemId}/-cart-items-{itemId}-PATCH-Integration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdaFunctionsUpdateCartItemFunctionC53D526C","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:364453382854:",{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"/*/*/cart/items/{itemId}"]]}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/PATCH--cart--items--{itemId}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"authorizationType":"JWT","authorizerId":{"Ref":"ApiGatewayEpicWeaveApiCognitoAuthorizer3D369202"},"routeKey":"PATCH /cart/items/{itemId}","target":{"Fn::Join":["",["integrations/",{"Ref":"ApiGatewayEpicWeaveApiPATCHcartitemsitemIdcartitemsitemIdPATCHIntegration6C4517C8"}]]}}}}}},"DELETE--cart--items--{itemId}":{"id":"DELETE--cart--items--{itemId}","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/DELETE--cart--items--{itemId}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.239.0"},"children":{"-cart-items-{itemId}-DELETE-Integration":{"id":"-cart-items-{itemId}-DELETE-Integration","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/DELETE--cart--items--{itemId}/-cart-items-{itemId}-DELETE-Integration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/DELETE--cart--items--{itemId}/-cart-items-{itemId}-DELETE-Integration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["LambdaFunctionsRemoveCartItemFunction30094603","Arn"]},"payloadFormatVersion":"2.0"}}}}},"-cart-items-{itemId}-DELETE-Integration-Permission":{"id":"-cart-items-{itemId}-DELETE-Integration-Permission","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/DELETE--cart--items--{itemId}/-cart-items-{itemId}-DELETE-Integration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdaFunctionsRemoveCartItemFunction30094603","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:364453382854:",{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"/*/*/cart/items/{itemId}"]]}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/DELETE--cart--items--{itemId}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"authorizationType":"JWT","authorizerId":{"Ref":"ApiGatewayEpicWeaveApiCognitoAuthorizer3D369202"},"routeKey":"DELETE /cart/items/{itemId}","target":{"Fn::Join":["",["integrations/",{"Ref":"ApiGatewayEpicWeaveApiDELETEcartitemsitemIdcartitemsitemIdDELETEIntegrationEC5E3731"}]]}}}}}},"POST--orders":{"id":"POST--orders","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--orders","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.239.0"},"children":{"-orders-POST-Integration":{"id":"-orders-POST-Integration","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--orders/-orders-POST-Integration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--orders/-orders-POST-Integration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["LambdaFunctionsCreateOrderFunction190BD3D4","Arn"]},"payloadFormatVersion":"2.0"}}}}},"-orders-POST-Integration-Permission":{"id":"-orders-POST-Integration-Permission","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--orders/-orders-POST-Integration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdaFunctionsCreateOrderFunction190BD3D4","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:364453382854:",{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"/*/*/orders"]]}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--orders/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"authorizationType":"JWT","authorizerId":{"Ref":"ApiGatewayEpicWeaveApiCognitoAuthorizer3D369202"},"routeKey":"POST /orders","target":{"Fn::Join":["",["integrations/",{"Ref":"ApiGatewayEpicWeaveApiPOSTordersordersPOSTIntegrationD2CAB03B"}]]}}}}}},"POST--orders--{orderId}--confirm":{"id":"POST--orders--{orderId}--confirm","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--orders--{orderId}--confirm","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.239.0"},"children":{"-orders-{orderId}-confirm-POST-Integration":{"id":"-orders-{orderId}-confirm-POST-Integration","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--orders--{orderId}--confirm/-orders-{orderId}-confirm-POST-Integration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--orders--{orderId}--confirm/-orders-{orderId}-confirm-POST-Integration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["LambdaFunctionsSendConfirmationFunctionCBDC6A53","Arn"]},"payloadFormatVersion":"2.0"}}}}},"-orders-{orderId}-confirm-POST-Integration-Permission":{"id":"-orders-{orderId}-confirm-POST-Integration-Permission","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--orders--{orderId}--confirm/-orders-{orderId}-confirm-POST-Integration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdaFunctionsSendConfirmationFunctionCBDC6A53","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:364453382854:",{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"/*/*/orders/{orderId}/confirm"]]}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--orders--{orderId}--confirm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"authorizationType":"JWT","authorizerId":{"Ref":"ApiGatewayEpicWeaveApiCognitoAuthorizer3D369202"},"routeKey":"POST /orders/{orderId}/confirm","target":{"Fn::Join":["",["integrations/",{"Ref":"ApiGatewayEpicWeaveApiPOSTordersorderIdconfirmordersorderIdconfirmPOSTIntegrationED32D188"}]]}}}}}},"GET--orders":{"id":"GET--orders","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--orders","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.239.0"},"children":{"-orders-GET-Integration":{"id":"-orders-GET-Integration","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--orders/-orders-GET-Integration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--orders/-orders-GET-Integration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["LambdaFunctionsGetOrdersFunction9519D398","Arn"]},"payloadFormatVersion":"2.0"}}}}},"-orders-GET-Integration-Permission":{"id":"-orders-GET-Integration-Permission","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--orders/-orders-GET-Integration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdaFunctionsGetOrdersFunction9519D398","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:364453382854:",{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"/*/*/orders"]]}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--orders/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"authorizationType":"JWT","authorizerId":{"Ref":"ApiGatewayEpicWeaveApiCognitoAuthorizer3D369202"},"routeKey":"GET /orders","target":{"Fn::Join":["",["integrations/",{"Ref":"ApiGatewayEpicWeaveApiGETordersordersGETIntegration2CA95947"}]]}}}}}},"GET--orders--{orderId}":{"id":"GET--orders--{orderId}","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--orders--{orderId}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.239.0"},"children":{"-orders-{orderId}-GET-Integration":{"id":"-orders-{orderId}-GET-Integration","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--orders--{orderId}/-orders-{orderId}-GET-Integration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--orders--{orderId}/-orders-{orderId}-GET-Integration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["LambdaFunctionsGetOrderDetailFunctionEA21401B","Arn"]},"payloadFormatVersion":"2.0"}}}}},"-orders-{orderId}-GET-Integration-Permission":{"id":"-orders-{orderId}-GET-Integration-Permission","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--orders--{orderId}/-orders-{orderId}-GET-Integration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdaFunctionsGetOrderDetailFunctionEA21401B","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:364453382854:",{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"/*/*/orders/{orderId}"]]}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--orders--{orderId}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"authorizationType":"JWT","authorizerId":{"Ref":"ApiGatewayEpicWeaveApiCognitoAuthorizer3D369202"},"routeKey":"GET /orders/{orderId}","target":{"Fn::Join":["",["integrations/",{"Ref":"ApiGatewayEpicWeaveApiGETordersorderIdordersorderIdGETIntegrationE6CC2E44"}]]}}}}}},"GET--admin--orders":{"id":"GET--admin--orders","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--admin--orders","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.239.0"},"children":{"-admin-orders-GET-Integration":{"id":"-admin-orders-GET-Integration","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--admin--orders/-admin-orders-GET-Integration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--admin--orders/-admin-orders-GET-Integration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["LambdaFunctionsGetAdminOrdersFunctionA17EA637","Arn"]},"payloadFormatVersion":"2.0"}}}}},"-admin-orders-GET-Integration-Permission":{"id":"-admin-orders-GET-Integration-Permission","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--admin--orders/-admin-orders-GET-Integration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdaFunctionsGetAdminOrdersFunctionA17EA637","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:364453382854:",{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"/*/*/admin/orders"]]}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--admin--orders/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"authorizationType":"JWT","authorizerId":{"Ref":"ApiGatewayEpicWeaveApiCognitoAuthorizer3D369202"},"routeKey":"GET /admin/orders","target":{"Fn::Join":["",["integrations/",{"Ref":"ApiGatewayEpicWeaveApiGETadminordersadminordersGETIntegration266D7F89"}]]}}}}}},"PATCH--admin--orders--{orderId}":{"id":"PATCH--admin--orders--{orderId}","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/PATCH--admin--orders--{orderId}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.239.0"},"children":{"-admin-orders-{orderId}-PATCH-Integration":{"id":"-admin-orders-{orderId}-PATCH-Integration","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/PATCH--admin--orders--{orderId}/-admin-orders-{orderId}-PATCH-Integration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/PATCH--admin--orders--{orderId}/-admin-orders-{orderId}-PATCH-Integration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["LambdaFunctionsUpdateOrderStatusFunction6EDB7F06","Arn"]},"payloadFormatVersion":"2.0"}}}}},"-admin-orders-{orderId}-PATCH-Integration-Permission":{"id":"-admin-orders-{orderId}-PATCH-Integration-Permission","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/PATCH--admin--orders--{orderId}/-admin-orders-{orderId}-PATCH-Integration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdaFunctionsUpdateOrderStatusFunction6EDB7F06","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:364453382854:",{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"/*/*/admin/orders/{orderId}"]]}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/PATCH--admin--orders--{orderId}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"authorizationType":"JWT","authorizerId":{"Ref":"ApiGatewayEpicWeaveApiCognitoAuthorizer3D369202"},"routeKey":"PATCH /admin/orders/{orderId}","target":{"Fn::Join":["",["integrations/",{"Ref":"ApiGatewayEpicWeaveApiPATCHadminordersorderIdadminordersorderIdPATCHIntegration3F55723C"}]]}}}}}},"POST--admin--orders--{orderId}--refund":{"id":"POST--admin--orders--{orderId}--refund","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--admin--orders--{orderId}--refund","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.239.0"},"children":{"-admin-orders-{orderId}-refund-POST-Integration":{"id":"-admin-orders-{orderId}-refund-POST-Integration","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--admin--orders--{orderId}--refund/-admin-orders-{orderId}-refund-POST-Integration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--admin--orders--{orderId}--refund/-admin-orders-{orderId}-refund-POST-Integration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["LambdaFunctionsProcessRefundFunctionFB8E6B71","Arn"]},"payloadFormatVersion":"2.0"}}}}},"-admin-orders-{orderId}-refund-POST-Integration-Permission":{"id":"-admin-orders-{orderId}-refund-POST-Integration-Permission","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--admin--orders--{orderId}--refund/-admin-orders-{orderId}-refund-POST-Integration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdaFunctionsProcessRefundFunctionFB8E6B71","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:364453382854:",{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"/*/*/admin/orders/{orderId}/refund"]]}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/POST--admin--orders--{orderId}--refund/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"authorizationType":"JWT","authorizerId":{"Ref":"ApiGatewayEpicWeaveApiCognitoAuthorizer3D369202"},"routeKey":"POST /admin/orders/{orderId}/refund","target":{"Fn::Join":["",["integrations/",{"Ref":"ApiGatewayEpicWeaveApiPOSTadminordersorderIdrefundadminordersorderIdrefundPOSTIntegration7CF972AB"}]]}}}}}},"GET--admin--config":{"id":"GET--admin--config","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--admin--config","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.239.0"},"children":{"-admin-config-GET-Integration":{"id":"-admin-config-GET-Integration","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--admin--config/-admin-config-GET-Integration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--admin--config/-admin-config-GET-Integration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["LambdaFunctionsGetConfigFunction079F0FF6","Arn"]},"payloadFormatVersion":"2.0"}}}}},"-admin-config-GET-Integration-Permission":{"id":"-admin-config-GET-Integration-Permission","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--admin--config/-admin-config-GET-Integration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdaFunctionsGetConfigFunction079F0FF6","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:364453382854:",{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"/*/*/admin/config"]]}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/GET--admin--config/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"authorizationType":"JWT","authorizerId":{"Ref":"ApiGatewayEpicWeaveApiCognitoAuthorizer3D369202"},"routeKey":"GET /admin/config","target":{"Fn::Join":["",["integrations/",{"Ref":"ApiGatewayEpicWeaveApiGETadminconfigadminconfigGETIntegration9FDA32FD"}]]}}}}}},"PUT--admin--config":{"id":"PUT--admin--config","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/PUT--admin--config","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.239.0"},"children":{"-admin-config-PUT-Integration":{"id":"-admin-config-PUT-Integration","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/PUT--admin--config/-admin-config-PUT-Integration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/PUT--admin--config/-admin-config-PUT-Integration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["LambdaFunctionsUpdateConfigFunction495CC040","Arn"]},"payloadFormatVersion":"2.0"}}}}},"-admin-config-PUT-Integration-Permission":{"id":"-admin-config-PUT-Integration-Permission","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/PUT--admin--config/-admin-config-PUT-Integration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdaFunctionsUpdateConfigFunction495CC040","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:364453382854:",{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"/*/*/admin/config"]]}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/ApiGateway/EpicWeaveApi/PUT--admin--config/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ApiGatewayEpicWeaveApi7F9ADE06"},"authorizationType":"JWT","authorizerId":{"Ref":"ApiGatewayEpicWeaveApiCognitoAuthorizer3D369202"},"routeKey":"PUT /admin/config","target":{"Fn::Join":["",["integrations/",{"Ref":"ApiGatewayEpicWeaveApiPUTadminconfigadminconfigPUTIntegration65AAA8C8"}]]}}}}}}}},"ApiEndpoint":{"id":"ApiEndpoint","path":"EpicWeaveStack-dev/ApiGateway/ApiEndpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.239.0"}}}},"LambdaFunctions":{"id":"LambdaFunctions","path":"EpicWeaveStack-dev/LambdaFunctions","constructInfo":{"fqn":"constructs.Construct","version":"10.5.1"},"children":{"ListProductsFunction":{"id":"ListProductsFunction","path":"EpicWeaveStack-dev/LambdaFunctions/ListProductsFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.239.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"EpicWeaveStack-dev/LambdaFunctions/ListProductsFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/ListProductsFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"EpicWeaveStack-dev/LambdaFunctions/ListProductsFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/ListProductsFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"LambdaFunctionsListProductsFunctionServiceRoleDefaultPolicy4C564C2C","roles":[{"Ref":"LambdaFunctionsListProductsFunctionServiceRole3249FA08"}]}}}}}}},"Code":{"id":"Code","path":"EpicWeaveStack-dev/LambdaFunctions/ListProductsFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.239.0"},"children":{"Stage":{"id":"Stage","path":"EpicWeaveStack-dev/LambdaFunctions/ListProductsFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.239.0"}},"AssetBucket":{"id":"AssetBucket","path":"EpicWeaveStack-dev/LambdaFunctions/ListProductsFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.239.0"}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/ListProductsFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-364453382854-us-east-1","s3Key":"96aedeaa4ac4f6d4a4b2e7209140d3ec59741588d7da984a7dc1f6c947e0d66d.zip"},"description":"List products with mythology, style, price filters","environment":{"variables":{"TABLE_NAME":{"Ref":"EpicWeaveTableBDE9225D"},"NODE_ENV":"production"}},"functionName":"epicweave-list-products","handler":"products/list-products.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaFunctionsListProductsFunctionServiceRole3249FA08","Arn"]},"runtime":"nodejs20.x","timeout":30}}}}},"GetProductFunction":{"id":"GetProductFunction","path":"EpicWeaveStack-dev/LambdaFunctions/GetProductFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.239.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"EpicWeaveStack-dev/LambdaFunctions/GetProductFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/GetProductFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"EpicWeaveStack-dev/LambdaFunctions/GetProductFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/GetProductFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"LambdaFunctionsGetProductFunctionServiceRoleDefaultPolicyCE721A82","roles":[{"Ref":"LambdaFunctionsGetProductFunctionServiceRoleF56A1620"}]}}}}}}},"Code":{"id":"Code","path":"EpicWeaveStack-dev/LambdaFunctions/GetProductFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.239.0"},"children":{"Stage":{"id":"Stage","path":"EpicWeaveStack-dev/LambdaFunctions/GetProductFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.239.0"}},"AssetBucket":{"id":"AssetBucket","path":"EpicWeaveStack-dev/LambdaFunctions/GetProductFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.239.0"}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/GetProductFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-364453382854-us-east-1","s3Key":"96aedeaa4ac4f6d4a4b2e7209140d3ec59741588d7da984a7dc1f6c947e0d66d.zip"},"description":"Get product details with variants","environment":{"variables":{"TABLE_NAME":{"Ref":"EpicWeaveTableBDE9225D"},"NODE_ENV":"production"}},"functionName":"epicweave-get-product","handler":"products/get-product.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaFunctionsGetProductFunctionServiceRoleF56A1620","Arn"]},"runtime":"nodejs20.x","timeout":30}}}}},"CreateProductFunction":{"id":"CreateProductFunction","path":"EpicWeaveStack-dev/LambdaFunctions/CreateProductFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.239.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"EpicWeaveStack-dev/LambdaFunctions/CreateProductFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/CreateProductFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"EpicWeaveStack-dev/LambdaFunctions/CreateProductFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/CreateProductFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchWriteItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:PutItem","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"LambdaFunctionsCreateProductFunctionServiceRoleDefaultPolicy5A58699B","roles":[{"Ref":"LambdaFunctionsCreateProductFunctionServiceRoleE0665B14"}]}}}}}}},"Code":{"id":"Code","path":"EpicWeaveStack-dev/LambdaFunctions/CreateProductFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.239.0"},"children":{"Stage":{"id":"Stage","path":"EpicWeaveStack-dev/LambdaFunctions/CreateProductFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.239.0"}},"AssetBucket":{"id":"AssetBucket","path":"EpicWeaveStack-dev/LambdaFunctions/CreateProductFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.239.0"}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/CreateProductFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-364453382854-us-east-1","s3Key":"96aedeaa4ac4f6d4a4b2e7209140d3ec59741588d7da984a7dc1f6c947e0d66d.zip"},"description":"Create new product with variants (Admin)","environment":{"variables":{"TABLE_NAME":{"Ref":"EpicWeaveTableBDE9225D"},"NODE_ENV":"production"}},"functionName":"epicweave-create-product","handler":"admin/create-product.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaFunctionsCreateProductFunctionServiceRoleE0665B14","Arn"]},"runtime":"nodejs20.x","timeout":30}}}}},"CreateSessionFunction":{"id":"CreateSessionFunction","path":"EpicWeaveStack-dev/LambdaFunctions/CreateSessionFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.239.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"EpicWeaveStack-dev/LambdaFunctions/CreateSessionFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/CreateSessionFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"EpicWeaveStack-dev/LambdaFunctions/CreateSessionFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/CreateSessionFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},"/index/*"]]}]},{"Action":"ssm:GetParameter","Effect":"Allow","Resource":"arn:aws:ssm:us-east-1:364453382854:parameter/EpicWeave/*"}],"Version":"2012-10-17"},"policyName":"LambdaFunctionsCreateSessionFunctionServiceRoleDefaultPolicy2C3E2FF7","roles":[{"Ref":"LambdaFunctionsCreateSessionFunctionServiceRoleCC993117"}]}}}}}}},"Code":{"id":"Code","path":"EpicWeaveStack-dev/LambdaFunctions/CreateSessionFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.239.0"},"children":{"Stage":{"id":"Stage","path":"EpicWeaveStack-dev/LambdaFunctions/CreateSessionFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.239.0"}},"AssetBucket":{"id":"AssetBucket","path":"EpicWeaveStack-dev/LambdaFunctions/CreateSessionFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.239.0"}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/CreateSessionFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-364453382854-us-east-1","s3Key":"96aedeaa4ac4f6d4a4b2e7209140d3ec59741588d7da984a7dc1f6c947e0d66d.zip"},"description":"Create AI design session with Stripe payment","environment":{"variables":{"TABLE_NAME":{"Ref":"EpicWeaveTableBDE9225D"},"NODE_ENV":"production","STRIPE_SECRET_KEY":"{{resolve:secretsmanager:epicweave/stripe-api-key}}","SKIP_SESSION_FEE":"true"}},"functionName":"epicweave-create-session","handler":"sessions/create-session.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaFunctionsCreateSessionFunctionServiceRoleCC993117","Arn"]},"runtime":"nodejs20.x","timeout":60}}}}},"GenerateDesignFunction":{"id":"GenerateDesignFunction","path":"EpicWeaveStack-dev/LambdaFunctions/GenerateDesignFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.239.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"EpicWeaveStack-dev/LambdaFunctions/GenerateDesignFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/GenerateDesignFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"EpicWeaveStack-dev/LambdaFunctions/GenerateDesignFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/GenerateDesignFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},"/index/*"]]}]},{"Action":["sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["AIJobQueue2EA29381","Arn"]}},{"Action":"ssm:GetParameter","Effect":"Allow","Resource":"arn:aws:ssm:us-east-1:364453382854:parameter/EpicWeave/*"}],"Version":"2012-10-17"},"policyName":"LambdaFunctionsGenerateDesignFunctionServiceRoleDefaultPolicy0ACD9BE2","roles":[{"Ref":"LambdaFunctionsGenerateDesignFunctionServiceRole2D880764"}]}}}}}}},"Code":{"id":"Code","path":"EpicWeaveStack-dev/LambdaFunctions/GenerateDesignFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.239.0"},"children":{"Stage":{"id":"Stage","path":"EpicWeaveStack-dev/LambdaFunctions/GenerateDesignFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.239.0"}},"AssetBucket":{"id":"AssetBucket","path":"EpicWeaveStack-dev/LambdaFunctions/GenerateDesignFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.239.0"}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/GenerateDesignFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-364453382854-us-east-1","s3Key":"96aedeaa4ac4f6d4a4b2e7209140d3ec59741588d7da984a7dc1f6c947e0d66d.zip"},"description":"Validate prompt, enforce content rules, enqueue to SQS","environment":{"variables":{"TABLE_NAME":{"Ref":"EpicWeaveTableBDE9225D"},"NODE_ENV":"production","AI_QUEUE_URL":{"Ref":"AIJobQueue2EA29381"}}},"functionName":"epicweave-generate-design","handler":"sessions/generate-design.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaFunctionsGenerateDesignFunctionServiceRole2D880764","Arn"]},"runtime":"nodejs20.x","timeout":30}}}}},"GetSessionStatusFunction":{"id":"GetSessionStatusFunction","path":"EpicWeaveStack-dev/LambdaFunctions/GetSessionStatusFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.239.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"EpicWeaveStack-dev/LambdaFunctions/GetSessionStatusFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/GetSessionStatusFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"EpicWeaveStack-dev/LambdaFunctions/GetSessionStatusFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/GetSessionStatusFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"LambdaFunctionsGetSessionStatusFunctionServiceRoleDefaultPolicy159DC24E","roles":[{"Ref":"LambdaFunctionsGetSessionStatusFunctionServiceRole0675B40F"}]}}}}}}},"Code":{"id":"Code","path":"EpicWeaveStack-dev/LambdaFunctions/GetSessionStatusFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.239.0"},"children":{"Stage":{"id":"Stage","path":"EpicWeaveStack-dev/LambdaFunctions/GetSessionStatusFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.239.0"}},"AssetBucket":{"id":"AssetBucket","path":"EpicWeaveStack-dev/LambdaFunctions/GetSessionStatusFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.239.0"}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/GetSessionStatusFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-364453382854-us-east-1","s3Key":"96aedeaa4ac4f6d4a4b2e7209140d3ec59741588d7da984a7dc1f6c947e0d66d.zip"},"description":"Get session status and message history","environment":{"variables":{"TABLE_NAME":{"Ref":"EpicWeaveTableBDE9225D"},"NODE_ENV":"production"}},"functionName":"epicweave-get-session-status","handler":"sessions/get-session-status.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaFunctionsGetSessionStatusFunctionServiceRole0675B40F","Arn"]},"runtime":"nodejs20.x","timeout":30}}}}},"FinalizeDesignFunction":{"id":"FinalizeDesignFunction","path":"EpicWeaveStack-dev/LambdaFunctions/FinalizeDesignFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.239.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"EpicWeaveStack-dev/LambdaFunctions/FinalizeDesignFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/FinalizeDesignFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"EpicWeaveStack-dev/LambdaFunctions/FinalizeDesignFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/FinalizeDesignFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},"/index/*"]]}]},{"Action":"ssm:GetParameter","Effect":"Allow","Resource":"arn:aws:ssm:us-east-1:364453382854:parameter/EpicWeave/*"}],"Version":"2012-10-17"},"policyName":"LambdaFunctionsFinalizeDesignFunctionServiceRoleDefaultPolicy5EF589DF","roles":[{"Ref":"LambdaFunctionsFinalizeDesignFunctionServiceRole9C4A2608"}]}}}}}}},"Code":{"id":"Code","path":"EpicWeaveStack-dev/LambdaFunctions/FinalizeDesignFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.239.0"},"children":{"Stage":{"id":"Stage","path":"EpicWeaveStack-dev/LambdaFunctions/FinalizeDesignFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.239.0"}},"AssetBucket":{"id":"AssetBucket","path":"EpicWeaveStack-dev/LambdaFunctions/FinalizeDesignFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.239.0"}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/FinalizeDesignFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-364453382854-us-east-1","s3Key":"96aedeaa4ac4f6d4a4b2e7209140d3ec59741588d7da984a7dc1f6c947e0d66d.zip"},"description":"Calculate price from Parameter Store and finalize design","environment":{"variables":{"TABLE_NAME":{"Ref":"EpicWeaveTableBDE9225D"},"NODE_ENV":"production"}},"functionName":"epicweave-finalize-design","handler":"sessions/finalize-design.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaFunctionsFinalizeDesignFunctionServiceRole9C4A2608","Arn"]},"runtime":"nodejs20.x","timeout":30}}}}},"AIWorkerFunction":{"id":"AIWorkerFunction","path":"EpicWeaveStack-dev/LambdaFunctions/AIWorkerFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.239.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"EpicWeaveStack-dev/LambdaFunctions/AIWorkerFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/AIWorkerFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"EpicWeaveStack-dev/LambdaFunctions/AIWorkerFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/AIWorkerFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},"/index/*"]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DesignsBucket6E20C4BA","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DesignsBucket6E20C4BA","Arn"]},"/*"]]}]},{"Action":"secretsmanager:GetSecretValue","Effect":"Allow","Resource":"arn:aws:secretsmanager:us-east-1:364453382854:secret:epicweave/*"},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["AIJobQueue2EA29381","Arn"]}}],"Version":"2012-10-17"},"policyName":"LambdaFunctionsAIWorkerFunctionServiceRoleDefaultPolicyD1DC9FEC","roles":[{"Ref":"LambdaFunctionsAIWorkerFunctionServiceRole16DFCF9E"}]}}}}}}},"Code":{"id":"Code","path":"EpicWeaveStack-dev/LambdaFunctions/AIWorkerFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.239.0"},"children":{"Stage":{"id":"Stage","path":"EpicWeaveStack-dev/LambdaFunctions/AIWorkerFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.239.0"}},"AssetBucket":{"id":"AssetBucket","path":"EpicWeaveStack-dev/LambdaFunctions/AIWorkerFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.239.0"}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/AIWorkerFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-364453382854-us-east-1","s3Key":"96aedeaa4ac4f6d4a4b2e7209140d3ec59741588d7da984a7dc1f6c947e0d66d.zip"},"description":"Process SQS messages: call DALL-E, upload to S3, update DynamoDB","environment":{"variables":{"TABLE_NAME":{"Ref":"EpicWeaveTableBDE9225D"},"NODE_ENV":"production","DESIGNS_BUCKET":{"Ref":"DesignsBucket6E20C4BA"}}},"functionName":"epicweave-ai-worker","handler":"sessions/ai-worker.handler","memorySize":512,"role":{"Fn::GetAtt":["LambdaFunctionsAIWorkerFunctionServiceRole16DFCF9E","Arn"]},"runtime":"nodejs20.x","timeout":120}}},"SqsEventSource:EpicWeaveStackdevAIJobQueueD4CE4215":{"id":"SqsEventSource:EpicWeaveStackdevAIJobQueueD4CE4215","path":"EpicWeaveStack-dev/LambdaFunctions/AIWorkerFunction/SqsEventSource:EpicWeaveStackdevAIJobQueueD4CE4215","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.EventSourceMapping","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/AIWorkerFunction/SqsEventSource:EpicWeaveStackdevAIJobQueueD4CE4215/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnEventSourceMapping","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::EventSourceMapping","aws:cdk:cloudformation:props":{"batchSize":1,"eventSourceArn":{"Fn::GetAtt":["AIJobQueue2EA29381","Arn"]},"functionName":{"Ref":"LambdaFunctionsAIWorkerFunctionDEAE766F"},"scalingConfig":{"maximumConcurrency":5}}}}}}}},"GetCartFunction":{"id":"GetCartFunction","path":"EpicWeaveStack-dev/LambdaFunctions/GetCartFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.239.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"EpicWeaveStack-dev/LambdaFunctions/GetCartFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/GetCartFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"EpicWeaveStack-dev/LambdaFunctions/GetCartFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/GetCartFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"LambdaFunctionsGetCartFunctionServiceRoleDefaultPolicyC081262F","roles":[{"Ref":"LambdaFunctionsGetCartFunctionServiceRoleDE2CB368"}]}}}}}}},"Code":{"id":"Code","path":"EpicWeaveStack-dev/LambdaFunctions/GetCartFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.239.0"},"children":{"Stage":{"id":"Stage","path":"EpicWeaveStack-dev/LambdaFunctions/GetCartFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.239.0"}},"AssetBucket":{"id":"AssetBucket","path":"EpicWeaveStack-dev/LambdaFunctions/GetCartFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.239.0"}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/GetCartFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-364453382854-us-east-1","s3Key":"96aedeaa4ac4f6d4a4b2e7209140d3ec59741588d7da984a7dc1f6c947e0d66d.zip"},"description":"Get cart items for authenticated user","environment":{"variables":{"TABLE_NAME":{"Ref":"EpicWeaveTableBDE9225D"},"NODE_ENV":"production"}},"functionName":"epicweave-get-cart","handler":"cart/get-cart.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaFunctionsGetCartFunctionServiceRoleDE2CB368","Arn"]},"runtime":"nodejs20.x","timeout":30}}}}},"AddToCartFunction":{"id":"AddToCartFunction","path":"EpicWeaveStack-dev/LambdaFunctions/AddToCartFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.239.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"EpicWeaveStack-dev/LambdaFunctions/AddToCartFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/AddToCartFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"EpicWeaveStack-dev/LambdaFunctions/AddToCartFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/AddToCartFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"LambdaFunctionsAddToCartFunctionServiceRoleDefaultPolicyB690F5A0","roles":[{"Ref":"LambdaFunctionsAddToCartFunctionServiceRole8930F1B6"}]}}}}}}},"Code":{"id":"Code","path":"EpicWeaveStack-dev/LambdaFunctions/AddToCartFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.239.0"},"children":{"Stage":{"id":"Stage","path":"EpicWeaveStack-dev/LambdaFunctions/AddToCartFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.239.0"}},"AssetBucket":{"id":"AssetBucket","path":"EpicWeaveStack-dev/LambdaFunctions/AddToCartFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.239.0"}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/AddToCartFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-364453382854-us-east-1","s3Key":"96aedeaa4ac4f6d4a4b2e7209140d3ec59741588d7da984a7dc1f6c947e0d66d.zip"},"description":"Add item to cart (pre-designed or custom)","environment":{"variables":{"TABLE_NAME":{"Ref":"EpicWeaveTableBDE9225D"},"NODE_ENV":"production"}},"functionName":"epicweave-add-to-cart","handler":"cart/add-to-cart.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaFunctionsAddToCartFunctionServiceRole8930F1B6","Arn"]},"runtime":"nodejs20.x","timeout":30}}}}},"UpdateCartItemFunction":{"id":"UpdateCartItemFunction","path":"EpicWeaveStack-dev/LambdaFunctions/UpdateCartItemFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.239.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"EpicWeaveStack-dev/LambdaFunctions/UpdateCartItemFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/UpdateCartItemFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"EpicWeaveStack-dev/LambdaFunctions/UpdateCartItemFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/UpdateCartItemFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"LambdaFunctionsUpdateCartItemFunctionServiceRoleDefaultPolicyB91C0A34","roles":[{"Ref":"LambdaFunctionsUpdateCartItemFunctionServiceRole05A39DCE"}]}}}}}}},"Code":{"id":"Code","path":"EpicWeaveStack-dev/LambdaFunctions/UpdateCartItemFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.239.0"},"children":{"Stage":{"id":"Stage","path":"EpicWeaveStack-dev/LambdaFunctions/UpdateCartItemFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.239.0"}},"AssetBucket":{"id":"AssetBucket","path":"EpicWeaveStack-dev/LambdaFunctions/UpdateCartItemFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.239.0"}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/UpdateCartItemFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-364453382854-us-east-1","s3Key":"96aedeaa4ac4f6d4a4b2e7209140d3ec59741588d7da984a7dc1f6c947e0d66d.zip"},"description":"Update cart item quantity","environment":{"variables":{"TABLE_NAME":{"Ref":"EpicWeaveTableBDE9225D"},"NODE_ENV":"production"}},"functionName":"epicweave-update-cart-item","handler":"cart/update-cart-item.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaFunctionsUpdateCartItemFunctionServiceRole05A39DCE","Arn"]},"runtime":"nodejs20.x","timeout":30}}}}},"RemoveCartItemFunction":{"id":"RemoveCartItemFunction","path":"EpicWeaveStack-dev/LambdaFunctions/RemoveCartItemFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.239.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"EpicWeaveStack-dev/LambdaFunctions/RemoveCartItemFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/RemoveCartItemFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"EpicWeaveStack-dev/LambdaFunctions/RemoveCartItemFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/RemoveCartItemFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"LambdaFunctionsRemoveCartItemFunctionServiceRoleDefaultPolicyE46FE27D","roles":[{"Ref":"LambdaFunctionsRemoveCartItemFunctionServiceRoleBDBAC50F"}]}}}}}}},"Code":{"id":"Code","path":"EpicWeaveStack-dev/LambdaFunctions/RemoveCartItemFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.239.0"},"children":{"Stage":{"id":"Stage","path":"EpicWeaveStack-dev/LambdaFunctions/RemoveCartItemFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.239.0"}},"AssetBucket":{"id":"AssetBucket","path":"EpicWeaveStack-dev/LambdaFunctions/RemoveCartItemFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.239.0"}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/RemoveCartItemFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-364453382854-us-east-1","s3Key":"96aedeaa4ac4f6d4a4b2e7209140d3ec59741588d7da984a7dc1f6c947e0d66d.zip"},"description":"Remove item from cart","environment":{"variables":{"TABLE_NAME":{"Ref":"EpicWeaveTableBDE9225D"},"NODE_ENV":"production"}},"functionName":"epicweave-remove-cart-item","handler":"cart/remove-cart-item.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaFunctionsRemoveCartItemFunctionServiceRoleBDBAC50F","Arn"]},"runtime":"nodejs20.x","timeout":30}}}}},"CreateOrderFunction":{"id":"CreateOrderFunction","path":"EpicWeaveStack-dev/LambdaFunctions/CreateOrderFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.239.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"EpicWeaveStack-dev/LambdaFunctions/CreateOrderFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/CreateOrderFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"EpicWeaveStack-dev/LambdaFunctions/CreateOrderFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/CreateOrderFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},"/index/*"]]}]},{"Action":"ssm:GetParameter","Effect":"Allow","Resource":"arn:aws:ssm:us-east-1:364453382854:parameter/EpicWeave/*"},{"Action":"secretsmanager:GetSecretValue","Effect":"Allow","Resource":"arn:aws:secretsmanager:us-east-1:364453382854:secret:epicweave/*"}],"Version":"2012-10-17"},"policyName":"LambdaFunctionsCreateOrderFunctionServiceRoleDefaultPolicy22DCF070","roles":[{"Ref":"LambdaFunctionsCreateOrderFunctionServiceRoleC1A74007"}]}}}}}}},"Code":{"id":"Code","path":"EpicWeaveStack-dev/LambdaFunctions/CreateOrderFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.239.0"},"children":{"Stage":{"id":"Stage","path":"EpicWeaveStack-dev/LambdaFunctions/CreateOrderFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.239.0"}},"AssetBucket":{"id":"AssetBucket","path":"EpicWeaveStack-dev/LambdaFunctions/CreateOrderFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.239.0"}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/CreateOrderFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-364453382854-us-east-1","s3Key":"96aedeaa4ac4f6d4a4b2e7209140d3ec59741588d7da984a7dc1f6c947e0d66d.zip"},"description":"Create order: validate stock, Stripe payment, DynamoDB transaction","environment":{"variables":{"TABLE_NAME":{"Ref":"EpicWeaveTableBDE9225D"},"NODE_ENV":"production"}},"functionName":"epicweave-create-order","handler":"checkout/create-order.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaFunctionsCreateOrderFunctionServiceRoleC1A74007","Arn"]},"runtime":"nodejs20.x","timeout":60}}}}},"SendConfirmationFunction":{"id":"SendConfirmationFunction","path":"EpicWeaveStack-dev/LambdaFunctions/SendConfirmationFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.239.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"EpicWeaveStack-dev/LambdaFunctions/SendConfirmationFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/SendConfirmationFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"EpicWeaveStack-dev/LambdaFunctions/SendConfirmationFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/SendConfirmationFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},"/index/*"]]}]},{"Action":"ses:SendEmail","Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"LambdaFunctionsSendConfirmationFunctionServiceRoleDefaultPolicyEA7AED7D","roles":[{"Ref":"LambdaFunctionsSendConfirmationFunctionServiceRole03941082"}]}}}}}}},"Code":{"id":"Code","path":"EpicWeaveStack-dev/LambdaFunctions/SendConfirmationFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.239.0"},"children":{"Stage":{"id":"Stage","path":"EpicWeaveStack-dev/LambdaFunctions/SendConfirmationFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.239.0"}},"AssetBucket":{"id":"AssetBucket","path":"EpicWeaveStack-dev/LambdaFunctions/SendConfirmationFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.239.0"}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/SendConfirmationFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-364453382854-us-east-1","s3Key":"96aedeaa4ac4f6d4a4b2e7209140d3ec59741588d7da984a7dc1f6c947e0d66d.zip"},"description":"Send order confirmation email via SES","environment":{"variables":{"TABLE_NAME":{"Ref":"EpicWeaveTableBDE9225D"},"NODE_ENV":"production","FROM_EMAIL":"orders@epicweave.com"}},"functionName":"epicweave-send-confirmation","handler":"checkout/send-confirmation.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaFunctionsSendConfirmationFunctionServiceRole03941082","Arn"]},"runtime":"nodejs20.x","timeout":30}}}}},"GetOrdersFunction":{"id":"GetOrdersFunction","path":"EpicWeaveStack-dev/LambdaFunctions/GetOrdersFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.239.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"EpicWeaveStack-dev/LambdaFunctions/GetOrdersFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/GetOrdersFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"EpicWeaveStack-dev/LambdaFunctions/GetOrdersFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/GetOrdersFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"LambdaFunctionsGetOrdersFunctionServiceRoleDefaultPolicy997E9083","roles":[{"Ref":"LambdaFunctionsGetOrdersFunctionServiceRole456A4881"}]}}}}}}},"Code":{"id":"Code","path":"EpicWeaveStack-dev/LambdaFunctions/GetOrdersFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.239.0"},"children":{"Stage":{"id":"Stage","path":"EpicWeaveStack-dev/LambdaFunctions/GetOrdersFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.239.0"}},"AssetBucket":{"id":"AssetBucket","path":"EpicWeaveStack-dev/LambdaFunctions/GetOrdersFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.239.0"}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/GetOrdersFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-364453382854-us-east-1","s3Key":"96aedeaa4ac4f6d4a4b2e7209140d3ec59741588d7da984a7dc1f6c947e0d66d.zip"},"description":"Get order history for authenticated user","environment":{"variables":{"TABLE_NAME":{"Ref":"EpicWeaveTableBDE9225D"},"NODE_ENV":"production"}},"functionName":"epicweave-get-orders","handler":"orders/get-orders.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaFunctionsGetOrdersFunctionServiceRole456A4881","Arn"]},"runtime":"nodejs20.x","timeout":30}}}}},"GetOrderDetailFunction":{"id":"GetOrderDetailFunction","path":"EpicWeaveStack-dev/LambdaFunctions/GetOrderDetailFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.239.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"EpicWeaveStack-dev/LambdaFunctions/GetOrderDetailFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/GetOrderDetailFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"EpicWeaveStack-dev/LambdaFunctions/GetOrderDetailFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/GetOrderDetailFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"LambdaFunctionsGetOrderDetailFunctionServiceRoleDefaultPolicy03C6EAE3","roles":[{"Ref":"LambdaFunctionsGetOrderDetailFunctionServiceRoleE6D5B3A8"}]}}}}}}},"Code":{"id":"Code","path":"EpicWeaveStack-dev/LambdaFunctions/GetOrderDetailFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.239.0"},"children":{"Stage":{"id":"Stage","path":"EpicWeaveStack-dev/LambdaFunctions/GetOrderDetailFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.239.0"}},"AssetBucket":{"id":"AssetBucket","path":"EpicWeaveStack-dev/LambdaFunctions/GetOrderDetailFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.239.0"}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/GetOrderDetailFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-364453382854-us-east-1","s3Key":"96aedeaa4ac4f6d4a4b2e7209140d3ec59741588d7da984a7dc1f6c947e0d66d.zip"},"description":"Get order detail with items","environment":{"variables":{"TABLE_NAME":{"Ref":"EpicWeaveTableBDE9225D"},"NODE_ENV":"production"}},"functionName":"epicweave-get-order-detail","handler":"orders/get-order-detail.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaFunctionsGetOrderDetailFunctionServiceRoleE6D5B3A8","Arn"]},"runtime":"nodejs20.x","timeout":30}}}}},"GetAdminOrdersFunction":{"id":"GetAdminOrdersFunction","path":"EpicWeaveStack-dev/LambdaFunctions/GetAdminOrdersFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.239.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"EpicWeaveStack-dev/LambdaFunctions/GetAdminOrdersFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/GetAdminOrdersFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"EpicWeaveStack-dev/LambdaFunctions/GetAdminOrdersFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/GetAdminOrdersFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"LambdaFunctionsGetAdminOrdersFunctionServiceRoleDefaultPolicyC147B452","roles":[{"Ref":"LambdaFunctionsGetAdminOrdersFunctionServiceRole3C0664EE"}]}}}}}}},"Code":{"id":"Code","path":"EpicWeaveStack-dev/LambdaFunctions/GetAdminOrdersFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.239.0"},"children":{"Stage":{"id":"Stage","path":"EpicWeaveStack-dev/LambdaFunctions/GetAdminOrdersFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.239.0"}},"AssetBucket":{"id":"AssetBucket","path":"EpicWeaveStack-dev/LambdaFunctions/GetAdminOrdersFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.239.0"}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/GetAdminOrdersFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-364453382854-us-east-1","s3Key":"96aedeaa4ac4f6d4a4b2e7209140d3ec59741588d7da984a7dc1f6c947e0d66d.zip"},"description":"Admin: list orders filtered by status via GSI2","environment":{"variables":{"TABLE_NAME":{"Ref":"EpicWeaveTableBDE9225D"},"NODE_ENV":"production"}},"functionName":"epicweave-get-admin-orders","handler":"admin/get-admin-orders.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaFunctionsGetAdminOrdersFunctionServiceRole3C0664EE","Arn"]},"runtime":"nodejs20.x","timeout":30}}}}},"UpdateOrderStatusFunction":{"id":"UpdateOrderStatusFunction","path":"EpicWeaveStack-dev/LambdaFunctions/UpdateOrderStatusFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.239.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"EpicWeaveStack-dev/LambdaFunctions/UpdateOrderStatusFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/UpdateOrderStatusFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"EpicWeaveStack-dev/LambdaFunctions/UpdateOrderStatusFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/UpdateOrderStatusFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},"/index/*"]]}]},{"Action":"ses:SendEmail","Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"LambdaFunctionsUpdateOrderStatusFunctionServiceRoleDefaultPolicy3343BF72","roles":[{"Ref":"LambdaFunctionsUpdateOrderStatusFunctionServiceRoleF1092650"}]}}}}}}},"Code":{"id":"Code","path":"EpicWeaveStack-dev/LambdaFunctions/UpdateOrderStatusFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.239.0"},"children":{"Stage":{"id":"Stage","path":"EpicWeaveStack-dev/LambdaFunctions/UpdateOrderStatusFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.239.0"}},"AssetBucket":{"id":"AssetBucket","path":"EpicWeaveStack-dev/LambdaFunctions/UpdateOrderStatusFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.239.0"}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/UpdateOrderStatusFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-364453382854-us-east-1","s3Key":"96aedeaa4ac4f6d4a4b2e7209140d3ec59741588d7da984a7dc1f6c947e0d66d.zip"},"description":"Admin: update order status with transition validation","environment":{"variables":{"TABLE_NAME":{"Ref":"EpicWeaveTableBDE9225D"},"NODE_ENV":"production","FROM_EMAIL":"orders@epicweave.com"}},"functionName":"epicweave-update-order-status","handler":"admin/update-order-status.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaFunctionsUpdateOrderStatusFunctionServiceRoleF1092650","Arn"]},"runtime":"nodejs20.x","timeout":30}}}}},"ProcessRefundFunction":{"id":"ProcessRefundFunction","path":"EpicWeaveStack-dev/LambdaFunctions/ProcessRefundFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.239.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"EpicWeaveStack-dev/LambdaFunctions/ProcessRefundFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/ProcessRefundFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"EpicWeaveStack-dev/LambdaFunctions/ProcessRefundFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/ProcessRefundFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},"/index/*"]]}]},{"Action":"secretsmanager:GetSecretValue","Effect":"Allow","Resource":"arn:aws:secretsmanager:us-east-1:364453382854:secret:epicweave/*"}],"Version":"2012-10-17"},"policyName":"LambdaFunctionsProcessRefundFunctionServiceRoleDefaultPolicy817BFBA5","roles":[{"Ref":"LambdaFunctionsProcessRefundFunctionServiceRoleFD357A2F"}]}}}}}}},"Code":{"id":"Code","path":"EpicWeaveStack-dev/LambdaFunctions/ProcessRefundFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.239.0"},"children":{"Stage":{"id":"Stage","path":"EpicWeaveStack-dev/LambdaFunctions/ProcessRefundFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.239.0"}},"AssetBucket":{"id":"AssetBucket","path":"EpicWeaveStack-dev/LambdaFunctions/ProcessRefundFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.239.0"}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/ProcessRefundFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-364453382854-us-east-1","s3Key":"96aedeaa4ac4f6d4a4b2e7209140d3ec59741588d7da984a7dc1f6c947e0d66d.zip"},"description":"Admin: process Stripe refund, restore stock","environment":{"variables":{"TABLE_NAME":{"Ref":"EpicWeaveTableBDE9225D"},"NODE_ENV":"production"}},"functionName":"epicweave-process-refund","handler":"admin/process-refund.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaFunctionsProcessRefundFunctionServiceRoleFD357A2F","Arn"]},"runtime":"nodejs20.x","timeout":60}}}}},"GetConfigFunction":{"id":"GetConfigFunction","path":"EpicWeaveStack-dev/LambdaFunctions/GetConfigFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.239.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"EpicWeaveStack-dev/LambdaFunctions/GetConfigFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/GetConfigFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"EpicWeaveStack-dev/LambdaFunctions/GetConfigFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/GetConfigFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"ssm:GetParameter","Effect":"Allow","Resource":"arn:aws:ssm:us-east-1:364453382854:parameter/EpicWeave/*"}],"Version":"2012-10-17"},"policyName":"LambdaFunctionsGetConfigFunctionServiceRoleDefaultPolicyA5B5FB0E","roles":[{"Ref":"LambdaFunctionsGetConfigFunctionServiceRoleBC55371B"}]}}}}}}},"Code":{"id":"Code","path":"EpicWeaveStack-dev/LambdaFunctions/GetConfigFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.239.0"},"children":{"Stage":{"id":"Stage","path":"EpicWeaveStack-dev/LambdaFunctions/GetConfigFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.239.0"}},"AssetBucket":{"id":"AssetBucket","path":"EpicWeaveStack-dev/LambdaFunctions/GetConfigFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.239.0"}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/GetConfigFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-364453382854-us-east-1","s3Key":"96aedeaa4ac4f6d4a4b2e7209140d3ec59741588d7da984a7dc1f6c947e0d66d.zip"},"description":"Admin: read Parameter Store values grouped by category","environment":{"variables":{"TABLE_NAME":{"Ref":"EpicWeaveTableBDE9225D"},"NODE_ENV":"production"}},"functionName":"epicweave-get-config","handler":"admin/get-config.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaFunctionsGetConfigFunctionServiceRoleBC55371B","Arn"]},"runtime":"nodejs20.x","timeout":30}}}}},"UpdateConfigFunction":{"id":"UpdateConfigFunction","path":"EpicWeaveStack-dev/LambdaFunctions/UpdateConfigFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.239.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"EpicWeaveStack-dev/LambdaFunctions/UpdateConfigFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/UpdateConfigFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"EpicWeaveStack-dev/LambdaFunctions/UpdateConfigFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.239.0"},"children":{"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/UpdateConfigFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EpicWeaveTableBDE9225D","Arn"]},"/index/*"]]}]},{"Action":["ssm:GetParameter","ssm:GetParametersByPath","ssm:PutParameter"],"Effect":"Allow","Resource":"arn:aws:ssm:us-east-1:364453382854:parameter/EpicWeave/*"}],"Version":"2012-10-17"},"policyName":"LambdaFunctionsUpdateConfigFunctionServiceRoleDefaultPolicy959627BE","roles":[{"Ref":"LambdaFunctionsUpdateConfigFunctionServiceRole066E5226"}]}}}}}}},"Code":{"id":"Code","path":"EpicWeaveStack-dev/LambdaFunctions/UpdateConfigFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.239.0"},"children":{"Stage":{"id":"Stage","path":"EpicWeaveStack-dev/LambdaFunctions/UpdateConfigFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.239.0"}},"AssetBucket":{"id":"AssetBucket","path":"EpicWeaveStack-dev/LambdaFunctions/UpdateConfigFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.239.0"}}}},"Resource":{"id":"Resource","path":"EpicWeaveStack-dev/LambdaFunctions/UpdateConfigFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.239.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-364453382854-us-east-1","s3Key":"96aedeaa4ac4f6d4a4b2e7209140d3ec59741588d7da984a7dc1f6c947e0d66d.zip"},"description":"Admin: update Parameter Store value with validation and audit log","environment":{"variables":{"TABLE_NAME":{"Ref":"EpicWeaveTableBDE9225D"},"NODE_ENV":"production"}},"functionName":"epicweave-update-config","handler":"admin/update-config.handler","memorySize":256,"role":{"Fn::GetAtt":["LambdaFunctionsUpdateConfigFunctionServiceRole066E5226","Arn"]},"runtime":"nodejs20.x","timeout":30}}}}},"ListProductsFunctionArn":{"id":"ListProductsFunctionArn","path":"EpicWeaveStack-dev/LambdaFunctions/ListProductsFunctionArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.239.0"}},"GetProductFunctionArn":{"id":"GetProductFunctionArn","path":"EpicWeaveStack-dev/LambdaFunctions/GetProductFunctionArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.239.0"}},"CreateProductFunctionArn":{"id":"CreateProductFunctionArn","path":"EpicWeaveStack-dev/LambdaFunctions/CreateProductFunctionArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.239.0"}},"CreateSessionFunctionArn":{"id":"CreateSessionFunctionArn","path":"EpicWeaveStack-dev/LambdaFunctions/CreateSessionFunctionArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.239.0"}}}},"CDKMetadata":{"id":"CDKMetadata","path":"EpicWeaveStack-dev/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.5.1"},"children":{"Default":{"id":"Default","path":"EpicWeaveStack-dev/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.239.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"EpicWeaveStack-dev/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.239.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"EpicWeaveStack-dev/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.239.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.5.1"}}}}}